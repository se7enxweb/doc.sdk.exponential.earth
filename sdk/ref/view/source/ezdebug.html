<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="no" lang="no">

<head><!-- is_embed=True -->
<script type="text/javascript" src="../../../../../../bundle-playback.js%3Fv=krFivnjJ" charset="utf-8"></script>
<script type="text/javascript" src="../../../../../../wombat.js%3Fv=txqj7nKC" charset="utf-8"></script>
<script>window.RufflePlayer=window.RufflePlayer||{};window.RufflePlayer.config={"autoplay":"on","unmuteOverlay":"hidden"};</script>
<script type="text/javascript" src="../../../../../../ruffle/ruffle.js"></script>
<script type="text/javascript">
    __wm.init("http://web.archive.org/web");
  __wm.wombat("http://ez.no:80/sdk/ref/view/source/ezdebug","20030817122109","http://web.archive.org/","web","/_static/",
	      "1061122869");
</script>
<link rel="stylesheet" type="text/css" href="../../../../../../banner-styles.css%3Fv=S1zqJCYt.css" />
<link rel="stylesheet" type="text/css" href="../../../../../../iconochive.css%3Fv=3PDvdIFv.css" />
<!-- End Wayback Rewrite JS Include -->

<title>eZ publish&trade; SDK - API Reference</title>
</head>
<head>
<title>eZ publish&trade; SDK</title>
<link rel="stylesheet" type="text/css" href="http://web.archive.org/web/20030817122109cs_/http://ez.no/design/standard/stylesheets/core.css"/>
<link rel="stylesheet" type="text/css" href="http://web.archive.org/web/20030817122109cs_/http://ez.no/design/admin/stylesheets/admin.css"/>
<link rel="stylesheet" type="text/css" href="http://web.archive.org/web/20030817122109cs_/http://ez.no/kernel/sdk/style.css"/>
</head>

<body style="background: url(http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/grid-background.gif);">


<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
    <td class="headlogo" width="560">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/ezpublish_logo_blue.gif" alt="eZ publish"/></td>
    <td class="headlink" width="66">

<table width="66" cellspacing="0" cellpadding="0" border="0">
<tr>
    <td class="menuheadgraygfx" width="3">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/dark-left-corner.gif" alt=""/></td>
    <td class="menuheadgraytopline" width="60">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="60" height="1"/></td>
    <td class="menuheadgraygfx" width="3">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/dark-right-corner.gif" alt=""/></td>
</tr>
<tr>
    <td class="menuheadgrayleftline" width="3">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="1" height="15"/></td>
    <td class="menuheadgray">
    <p class="menuheadgray">
    <a class="menuheadlink" href="http://web.archive.org/web/20030817122109/http://ez.no/manual/">Manual</a>
    </p>
    </td>
    <td class="menuheadgrayrightline" width="3">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="1" height="15"/></td>
</tr>
</table>

</td>

    <td class="menuheadspacer" width="3">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="3" height="1"/></td>
    <td class="headlink" width="66">


<table cellspacing="0" cellpadding="0" border="0">
<tr>
    <td class="menuheadselectedgfx">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/light-left-corner.gif" alt=""/></td>
    <td class="menuheadselectedtopline">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="60" height="1"/></td>
    <td class="menuheadselectedgfx">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/light-right-corner.gif" alt=""/></td>
</tr>
<tr>
    <td class="menuheadselectedleftline">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="1" height="19"/></td>
    <td class="menuheadselected">
    <p class="menuheadselected">
    <a class="menuheadlink" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/">SDK</a>
    </p>
    </td>
    <td class="menuheadselectedrightline">
    <img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="1" height="19"/></td>
</tr>
</table>

    </td>
   <td class="headlogo" width="50%">
   &nbsp;</td>
</tr>
    <td colspan="11" class="menuheadtoolbar">
    &nbsp;
    </td>
</tr>
</table>


<table class="path" width="100%" cellpadding="0" cellspacing="0" border="0">
<tr>
    <td class="pathline" width="50%">
    &nbsp;
    </td>
    <td class="pathline" align="right" width="50%">
    &nbsp;
    </td>
</tr>
</table>


<table width="100%" bgcolor="white" cellpadding="5" cellspacing="0" border="0">
<tr>
<td valign="top" width="15%">

<table class="menuboxleft" width="120" cellpadding="1" cellspacing="0" border="0">
<tr>
    <th class="menuheaddark" colspan="2">
    <p class="menuhead"><a class="menuhead" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref">API Reference</p>
    </th>
</tr>
<tr>
    <td class="bullet" width="1">
    &nbsp;
    </td>
    <td class="menu" width="99%">
    <p class="menuitem"><p class="groupname">Sections</p><img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/modules/">Modules</a><br/><img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/hierarchy/">Hierarchy</a><br/><img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/annotated/">Annotated</a><br/><img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/files/">Files</a><br/><img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/functions/">Functions</a><br/><img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/related/">Related</a><br/>&nbsp;<img src="http://web.archive.org/web/20030817122109im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="../todo/index.html">Todo</a><br/></p>
    </td>
</tr>
</table>
</td>

<td valign="top" width="85%">
<table width="100%" border="0">
<tr><td colspan="2"><h1 class="dox">ezdebug.php</h1><div class="dox_fragment"><pre>00001 &lt;?php
00002 <span class="dox_comment">//</span>
00003 <span class="dox_comment">// Definition of eZDebug class</span>
00004 <span class="dox_comment">//</span>
00005 <span class="dox_comment">// Created on: &lt;12-Feb-2002 11:00:54 bf&gt;</span>
00006 <span class="dox_comment">//</span>
00007 <span class="dox_comment">// Copyright (C) 1999-2003 eZ systems as. All rights reserved.</span>
00008 <span class="dox_comment">//</span>
00009 <span class="dox_comment">// This source file is part of the eZ publish (tm) Open Source Content</span>
00010 <span class="dox_comment">// Management System.</span>
00011 <span class="dox_comment">//</span>
00012 <span class="dox_comment">// This file may be distributed and/or modified under the terms of the</span>
00013 <span class="dox_comment">// "GNU General Public License" version 2 as published by the Free</span>
00014 <span class="dox_comment">// Software Foundation and appearing in the file LICENSE.GPL included in</span>
00015 <span class="dox_comment">// the packaging of this file.</span>
00016 <span class="dox_comment">//</span>
00017 <span class="dox_comment">// Licencees holding valid "eZ publish professional licences" may use this</span>
00018 <span class="dox_comment">// file in accordance with the "eZ publish professional licence" Agreement</span>
00019 <span class="dox_comment">// provided with the Software.</span>
00020 <span class="dox_comment">//</span>
00021 <span class="dox_comment">// This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING</span>
00022 <span class="dox_comment">// THE WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR</span>
00023 <span class="dox_comment">// PURPOSE.</span>
00024 <span class="dox_comment">//</span>
00025 <span class="dox_comment">// The "eZ publish professional licence" is available at</span>
00026 <span class="dox_comment">// http://ez.no/products/licences/professional/. For pricing of this licence</span>
00027 <span class="dox_comment">// please contact us via e-mail to licence@ez.no. Further contact</span>
00028 <span class="dox_comment">// information is available at http://ez.no/home/contact/.</span>
00029 <span class="dox_comment">//</span>
00030 <span class="dox_comment">// The "GNU General Public License" (GPL) is available at</span>
00031 <span class="dox_comment">// http://www.gnu.org/copyleft/gpl.html.</span>
00032 <span class="dox_comment">//</span>
00033 <span class="dox_comment">// Contact licence@ez.no if any conditions of this licencing isn't clear to</span>
00034 <span class="dox_comment">// you.</span>
00035 <span class="dox_comment">//</span>
00036 
00083 include_once( <span class="dox_stringliteral">"lib/ezutils/classes/ezsys.php"</span> );
00084 
00085 define( <span class="dox_stringliteral">"EZ_LEVEL_NOTICE"</span>, 1 );
00086 define( <span class="dox_stringliteral">"EZ_LEVEL_WARNING"</span>, 2 );
00087 define( <span class="dox_stringliteral">"EZ_LEVEL_ERROR"</span>, 3 );
00088 define( <span class="dox_stringliteral">"EZ_LEVEL_TIMING_POINT"</span>, 4 );
00089 define( <span class="dox_stringliteral">"EZ_LEVEL_DEBUG"</span>, 5 );
00090 
00091 define( <span class="dox_stringliteral">"EZ_SHOW_NOTICE"</span>, 1 &lt;&lt; (EZ_LEVEL_NOTICE - 1) );
00092 define( <span class="dox_stringliteral">"EZ_SHOW_WARNING"</span>, 1 &lt;&lt; (EZ_LEVEL_WARNING - 1) );
00093 define( <span class="dox_stringliteral">"EZ_SHOW_ERROR"</span>, 1 &lt;&lt; (EZ_LEVEL_ERROR - 1) );
00094 define( <span class="dox_stringliteral">"EZ_SHOW_TIMING_POINT"</span>, 1 &lt;&lt; (EZ_LEVEL_TIMING_POINT - 1) );
00095 define( <span class="dox_stringliteral">"EZ_SHOW_DEBUG"</span>, 1 &lt;&lt; (EZ_LEVEL_DEBUG - 1) );
00096 define( <span class="dox_stringliteral">"EZ_SHOW_ALL"</span>, EZ_SHOW_NOTICE | EZ_SHOW_WARNING | EZ_SHOW_ERROR | EZ_SHOW_TIMING_POINT | EZ_SHOW_DEBUG );
00097 
00098 define( <span class="dox_stringliteral">"EZ_HANDLE_NONE"</span>, 0 );
00099 define( <span class="dox_stringliteral">"EZ_HANDLE_FROM_PHP"</span>, 1 );
00100 define( <span class="dox_stringliteral">"EZ_HANDLE_TO_PHP"</span>, 2 );
00101 
00102 define( <span class="dox_stringliteral">"EZ_OUTPUT_MESSAGE_SCREEN"</span>, 1 );
00103 define( <span class="dox_stringliteral">"EZ_OUTPUT_MESSAGE_STORE"</span>, 2 );
00104 
00105 define( <span class="dox_stringliteral">"EZ_DEBUG_MAX_LOGFILE_SIZE"</span>, 200*1024 );
00106 define( <span class="dox_stringliteral">"EZ_DEBUG_MAX_LOGROTATE_FILES"</span>, 3 );
00107 
<a name="l00108"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug">00108</a> <span class="dox_keyword">class </span><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug">eZDebug</a>
00109 {
<a name="l00113"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a0">00113</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a0">eZDebug</a>( )
00114     {
00115         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o2">TmpTimePoints</a> = array( EZ_LEVEL_NOTICE =&gt; array(),
00116                                       EZ_LEVEL_WARNING =&gt; array(),
00117                                       EZ_LEVEL_ERROR =&gt; array(),
00118                                       EZ_LEVEL_DEBUG =&gt; array() );
00119 
00120         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o6">OutputFormat</a> = array( EZ_LEVEL_NOTICE =&gt; array( <span class="dox_stringliteral">"color"</span> =&gt; <span class="dox_stringliteral">"green"</span>,
00121                                                                <span class="dox_stringliteral">"name"</span> =&gt; <span class="dox_stringliteral">"Notice"</span> ),
00122                                      EZ_LEVEL_WARNING =&gt; array( <span class="dox_stringliteral">"color"</span> =&gt; <span class="dox_stringliteral">"orange"</span>,
00123                                                                 <span class="dox_stringliteral">"name"</span> =&gt; <span class="dox_stringliteral">"Warning"</span> ),
00124                                      EZ_LEVEL_ERROR =&gt; array( <span class="dox_stringliteral">"color"</span> =&gt; <span class="dox_stringliteral">"red"</span>,
00125                                                               <span class="dox_stringliteral">"name"</span> =&gt; <span class="dox_stringliteral">"Error"</span> ),
00126                                      EZ_LEVEL_DEBUG =&gt; array( <span class="dox_stringliteral">"color"</span> =&gt; <span class="dox_stringliteral">"brown"</span>,
00127                                                               <span class="dox_stringliteral">"name"</span> =&gt; <span class="dox_stringliteral">"Debug"</span> ),
00128                                      EZ_LEVEL_TIMING_POINT =&gt; array( <span class="dox_stringliteral">"color"</span> =&gt; <span class="dox_stringliteral">"blue"</span>,
00129                                                                      <span class="dox_stringliteral">"name"</span> =&gt; <span class="dox_stringliteral">"Timing"</span> ) );
00130         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o7">LogFiles</a> = array( EZ_LEVEL_NOTICE =&gt; array( <span class="dox_stringliteral">"var/log/"</span>,
00131                                                            <span class="dox_stringliteral">"notice.log"</span> ),
00132                                  EZ_LEVEL_WARNING =&gt; array( <span class="dox_stringliteral">"var/log/"</span>,
00133                                                             <span class="dox_stringliteral">"warning.log"</span> ),
00134                                  EZ_LEVEL_ERROR =&gt; array( <span class="dox_stringliteral">"var/log/"</span>,
00135                                                           <span class="dox_stringliteral">"error.log"</span> ),
00136                                  EZ_LEVEL_DEBUG =&gt; array( <span class="dox_stringliteral">"var/log/"</span>,
00137                                                           <span class="dox_stringliteral">"debug.log"</span> ) );
00138         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o12">MessageTypes</a> = array( EZ_LEVEL_NOTICE,
00139                                      EZ_LEVEL_WARNING,
00140                                      EZ_LEVEL_ERROR,
00141                                      EZ_LEVEL_TIMING_POINT,
00142                                      EZ_LEVEL_DEBUG );
00143         $this-&gt;MessageNames = array( EZ_LEVEL_NOTICE =&gt; 'Notice',
00144                                      EZ_LEVEL_WARNING =&gt; 'Warning',
00145                                      EZ_LEVEL_ERROR =&gt; 'Error',
00146                                      EZ_LEVEL_TIMING_POINT =&gt; 'TimingPoint',
00147                                      EZ_LEVEL_DEBUG =&gt; 'Debug' );
00148         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o13">LogFileEnabled</a> = array( EZ_LEVEL_NOTICE =&gt; <span class="dox_keyword">true</span>,
00149                                        EZ_LEVEL_WARNING =&gt; <span class="dox_keyword">true</span>,
00150                                        EZ_LEVEL_ERROR =&gt; <span class="dox_keyword">true</span>,
00151                                        EZ_LEVEL_TIMING_POINT =&gt; <span class="dox_keyword">true</span>,
00152                                        EZ_LEVEL_DEBUG =&gt; <span class="dox_keyword">true</span> );
00153         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o4">ShowTypes</a> = EZ_SHOW_ALL;
00154         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o5">HandleType</a> = EZ_HANDLE_NONE;
00155         $this-&gt;OldHandler = <span class="dox_keyword">false</span>;
00156         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o10">UseCSS</a> = <span class="dox_keyword">false</span>;
00157         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o11">MessageOutput</a> = EZ_OUTPUT_MESSAGE_STORE;
00158         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o14">ScriptStart</a> = <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c1">eZDebug::timeToFloat</a>( microtime() );
00159         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o3">TimeAccumulatorList</a> = array();
00160         $this-&gt;TimeAccumulatorGroupList = array();
00161         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o15">OverrideList</a> = array();
00162     }
00163 
00164     function reset()
00165     {
00166         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o0">DebugStrings</a> = array();
00167         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o2">TmpTimePoints</a> = array( EZ_LEVEL_NOTICE =&gt; array(),
00168                                       EZ_LEVEL_WARNING =&gt; array(),
00169                                       EZ_LEVEL_ERROR =&gt; array(),
00170                                       EZ_LEVEL_DEBUG =&gt; array() );
00171         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o3">TimeAccumulatorList</a> = array();
00172         $this-&gt;TimeAccumulatorGroupList = array();
00173     }
00174 
<a name="l00178"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a2">00178</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a2">messageName</a>( $messageType )
00179     {
00180         <span class="dox_keywordflow">if</span> ( !isset( $<span class="dox_keyword">this</span> ) or
00181              get_class( $<span class="dox_keyword">this</span> ) != <span class="dox_stringliteral">"ezdebug"</span> )
00182             $<span class="dox_keyword">this</span> =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00183         <span class="dox_keywordflow">return</span> $this-&gt;MessageNames[$messageType];
00184     }
00185 
<a name="l00190"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">00190</a>     function &amp;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">instance</a>( )
00191     {
00192         $impl =&amp; $GLOBALS[<span class="dox_stringliteral">"eZDebugGlobalInstance"</span>];
00193 
00194         $<span class="dox_keyword">class </span>=&amp; get_class( $impl );
00195         <span class="dox_keywordflow">if</span> ( $<span class="dox_keyword">class </span>!= "ezdebug" )
00196         {
00197             $impl = <span class="dox_keyword">new</span> <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a0">eZDebug</a>();
00198         }
00199         <span class="dox_keywordflow">return</span> $impl;
00200     }
00201 
<a name="l00206"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d0">00206</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d0">showMessage</a>( $type )
00207     {
00208         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00209         <span class="dox_keywordflow">return</span> $debug-&gt;ShowTypes &amp; $type;
00210     }
00211 
<a name="l00218"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a4">00218</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a4">setHandleType</a>( $type )
00219     {
00220         <span class="dox_keywordflow">if</span> ( !isset( $<span class="dox_keyword">this</span> ) or
00221              get_class( $<span class="dox_keyword">this</span> ) != <span class="dox_stringliteral">"ezdebug"</span> )
00222             $<span class="dox_keyword">this</span> =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00223         <span class="dox_keywordflow">if</span> ( $type != EZ_HANDLE_TO_PHP and
00224              $type != EZ_HANDLE_FROM_PHP )
00225             $type = EZ_HANDLE_NONE;
00226         <span class="dox_keywordflow">if</span> ( $type == $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o5">HandleType</a> )
00227             <span class="dox_keywordflow">return</span> $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o5">HandleType</a>;
00228 
00229         <span class="dox_keywordflow">if</span> ( $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o5">HandleType</a> == EZ_HANDLE_FROM_PHP )
00230             restore_error_handler();
00231         <span class="dox_keywordflow">switch</span> ( $type )
00232         {
00233             <span class="dox_keywordflow">case</span> EZ_HANDLE_FROM_PHP:
00234             {
00235                 set_error_handler( <span class="dox_stringliteral">"eZDebugErrorHandler"</span> );
00236             } <span class="dox_keywordflow">break</span>;
00237 
00238             <span class="dox_keywordflow">case</span> EZ_HANDLE_TO_PHP:
00239             {
00240                 restore_error_handler();
00241             } <span class="dox_keywordflow">break</span>;
00242 
00243             <span class="dox_keywordflow">case</span> EZ_HANDLE_NONE:
00244             {
00245             }
00246         }
00247         $oldHandleType = $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o5">HandleType</a>;
00248         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o5">HandleType</a> = $type;
00249         <span class="dox_keywordflow">return</span> $oldHandleType;
00250     }
00251 
<a name="l00259"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d1">00259</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d1">showTypes</a>( $types = <span class="dox_keyword">false</span> )
00260     {
00261         <span class="dox_keywordflow">if</span> ( !isset( $<span class="dox_keyword">this</span> ) or
00262              get_class( $<span class="dox_keyword">this</span> ) != <span class="dox_stringliteral">"ezdebug"</span> )
00263             $<span class="dox_keyword">this</span> =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00264         <span class="dox_keywordflow">if</span> ( $types === <span class="dox_keyword">false</span> )
00265             <span class="dox_keywordflow">return</span> $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o4">ShowTypes</a>;
00266         $old_types = $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o4">ShowTypes</a>;
00267         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o4">ShowTypes</a> = $types;
00268         <span class="dox_keywordflow">return</span> $old_types;
00269     }
00270 
<a name="l00275"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a5">00275</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a5">errorHandler</a>( $errno, $errstr, $errfile, $errline )
00276     {
00277         <span class="dox_keywordflow">if</span> ( error_reporting() == 0 ) <span class="dox_comment">// @ error-control operator is used</span>
00278             <span class="dox_keywordflow">return</span>;
00279         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00280             <span class="dox_keywordflow">return</span>;
00281         $str = <span class="dox_stringliteral">"$errstr in $errfile on line $errline"</span>;
00282         $errnames =&amp; $GLOBALS[<span class="dox_stringliteral">"eZDebugPHPErrorNames"</span>];
00283         <span class="dox_keywordflow">if</span> ( !is_array( $errnames ) )
00284         {
00285             $errnames = array( E_ERROR =&gt; <span class="dox_stringliteral">"E_ERROR"</span>,
00286                                E_PARSE =&gt; <span class="dox_stringliteral">"E_PARSE"</span>,
00287                                E_CORE_ERROR =&gt; <span class="dox_stringliteral">"E_CORE_ERROR"</span>,
00288                                E_COMPILE_ERROR =&gt; <span class="dox_stringliteral">"E_COMPILE_ERROR"</span>,
00289                                E_USER_ERROR =&gt; <span class="dox_stringliteral">"E_USER_ERROR"</span>,
00290                                E_WARNING =&gt; <span class="dox_stringliteral">"E_WARNING"</span>,
00291                                E_CORE_WARNING =&gt; <span class="dox_stringliteral">"E_CORE_WARNING"</span>,
00292                                E_COMPILE_WARNING =&gt; <span class="dox_stringliteral">"E_COMPILE_WARNING"</span>,
00293                                E_USER_WARNING =&gt; <span class="dox_stringliteral">"E_USER_WARNING"</span>,
00294                                E_NOTICE =&gt; <span class="dox_stringliteral">"E_NOTICE"</span>,
00295                                E_USER_NOTICE =&gt; <span class="dox_stringliteral">"E_USER_NOTICE"</span> );
00296         }
00297         $errname = <span class="dox_stringliteral">"unknown"</span>;
00298         <span class="dox_keywordflow">if</span> ( isset( $errnames[$errno] ) )
00299             $errname = $errnames[$errno];
00300         <span class="dox_keywordflow">switch</span> ( $errno )
00301         {
00302             <span class="dox_keywordflow">case</span> E_ERROR:
00303             <span class="dox_keywordflow">case</span> E_PARSE:
00304             <span class="dox_keywordflow">case</span> E_CORE_ERROR:
00305             <span class="dox_keywordflow">case</span> E_COMPILE_ERROR:
00306             <span class="dox_keywordflow">case</span> E_USER_ERROR:
00307             {
00308                 <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d4">eZDebug::writeError</a>( $str, <span class="dox_stringliteral">"PHP"</span> );
00309             } <span class="dox_keywordflow">break</span>;
00310 
00311             <span class="dox_keywordflow">case</span> E_WARNING:
00312             <span class="dox_keywordflow">case</span> E_CORE_WARNING:
00313             <span class="dox_keywordflow">case</span> E_COMPILE_WARNING:
00314             <span class="dox_keywordflow">case</span> E_USER_WARNING:
00315             <span class="dox_keywordflow">case</span> E_NOTICE:
00316             {
00317                 <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d3">eZDebug::writeWarning</a>( $str, <span class="dox_stringliteral">"PHP"</span> );
00318             } <span class="dox_keywordflow">break</span>;
00319 
00320             <span class="dox_keywordflow">case</span> E_USER_NOTICE:
00321             {
00322                 <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d2">eZDebug::writeNotice</a>( $str, <span class="dox_stringliteral">"PHP"</span> );
00323             } <span class="dox_keywordflow">break</span>;
00324         }
00325     }
00326 
<a name="l00331"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d2">00331</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d2">writeNotice</a>( $string, $label=<span class="dox_stringliteral">""</span> )
00332     {
00333         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00334             <span class="dox_keywordflow">return</span>;
00335         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d0">eZDebug::showMessage</a>( EZ_SHOW_NOTICE ) )
00336             <span class="dox_keywordflow">return</span>;
00337         <span class="dox_keywordflow">if</span> ( is_object( $string ) || is_array( $string ) )
00338              $string =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#f0">eZDebug::dumpVariable</a>( $string );
00339 
00340         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00341         <span class="dox_keywordflow">if</span> ( $debug-&gt;HandleType == EZ_HANDLE_TO_PHP )
00342             trigger_error( $string, E_USER_NOTICE );
00343         <span class="dox_keywordflow">else</span>
00344             $debug-&gt;write( $string, EZ_LEVEL_NOTICE, $label );
00345     }
00346 
<a name="l00351"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d3">00351</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d3">writeWarning</a>( $string, $label=<span class="dox_stringliteral">""</span> )
00352     {
00353         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00354             <span class="dox_keywordflow">return</span>;
00355         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d0">eZDebug::showMessage</a>( EZ_SHOW_WARNING ) )
00356             <span class="dox_keywordflow">return</span>;
00357         <span class="dox_keywordflow">if</span> ( is_object( $string ) || is_array( $string ) )
00358             $string =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#f0">eZDebug::dumpVariable</a>( $string );
00359 
00360         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00361         <span class="dox_keywordflow">if</span> ( $debug-&gt;HandleType == EZ_HANDLE_TO_PHP )
00362             trigger_error( $string, E_USER_WARNING );
00363         <span class="dox_keywordflow">else</span>
00364             $debug-&gt;write( $string, EZ_LEVEL_WARNING, $label );
00365     }
00366 
<a name="l00371"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d4">00371</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d4">writeError</a>( $string, $label=<span class="dox_stringliteral">""</span> )
00372     {
00373         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00374             <span class="dox_keywordflow">return</span>;
00375         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d0">eZDebug::showMessage</a>( EZ_SHOW_ERROR ) )
00376             <span class="dox_keywordflow">return</span>;
00377         <span class="dox_keywordflow">if</span> ( is_object( $string ) || is_array( $string ) )
00378             $string =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#f0">eZDebug::dumpVariable</a>( $string );
00379 
00380         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00381         <span class="dox_keywordflow">if</span> ( $debug-&gt;HandleType == EZ_HANDLE_TO_PHP )
00382             trigger_error( $string, E_USER_ERROR );
00383         <span class="dox_keywordflow">else</span>
00384             $debug-&gt;write( $string, EZ_LEVEL_ERROR, $label );
00385     }
00386 
<a name="l00391"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d5">00391</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d5">writeDebug</a>( $string, $label=<span class="dox_stringliteral">""</span> )
00392     {
00393         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00394             <span class="dox_keywordflow">return</span>;
00395         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d0">eZDebug::showMessage</a>( EZ_SHOW_ERROR ) )
00396             <span class="dox_keywordflow">return</span>;
00397         <span class="dox_keywordflow">if</span> ( is_object( $string ) || is_array( $string ) )
00398             $string =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#f0">eZDebug::dumpVariable</a>( $string );
00399 
00400         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00401         <span class="dox_keywordflow">if</span> ( $debug-&gt;HandleType == EZ_HANDLE_TO_PHP )
00402             trigger_error( $string, E_USER_NOTICE );
00403         <span class="dox_keywordflow">else</span>
00404             $debug-&gt;write( $string, EZ_LEVEL_DEBUG, $label );
00405     }
00406 
<a name="l00412"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#f0">00412</a>     function &amp;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#f0">dumpVariable</a>( $var )
00413     {
00414         <span class="dox_comment">// save the buffer contents</span>
00415         $variableContents = <span class="dox_stringliteral">""</span>;
00416         $buffer =&amp; ob_get_contents();
00417         <span class="dox_keywordflow">if</span> ( strlen( $buffer ) &gt; 0 )
00418             ob_end_clean();
00419 
00420         ob_start();
00421         var_dump( $var );
00422         $variableContents .= ob_get_contents();
00423         ob_end_clean();
00424 
00425         <span class="dox_comment">// fill the buffer with the old values</span>
00426         ob_start();
00427         print( $buffer );
00428 
00429         <span class="dox_keywordflow">return</span> $variableContents;
00430     }
00431 
<a name="l00436"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a6">00436</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a6">setUseExternalCSS</a>( $use )
00437     {
00438         <span class="dox_keywordflow">if</span> ( !isset( $<span class="dox_keyword">this</span> ) or
00439              get_class( $<span class="dox_keyword">this</span> ) != <span class="dox_stringliteral">"ezdebug"</span> )
00440             $<span class="dox_keyword">this</span> =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00441         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o10">UseCSS</a> = $use;
00442     }
00443 
<a name="l00448"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a7">00448</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a7">setMessageOutput</a>( $output )
00449     {
00450         <span class="dox_keywordflow">if</span> ( !isset( $<span class="dox_keyword">this</span> ) or
00451              get_class( $<span class="dox_keyword">this</span> ) != <span class="dox_stringliteral">"ezdebug"</span> )
00452             $<span class="dox_keyword">this</span> =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00453         $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o11">MessageOutput</a> = $output;
00454     }
00455 
00458     function setStoreLog( $store )
00459     {
00460         <span class="dox_keywordflow">if</span> ( !isset( $<span class="dox_keyword">this</span> ) or
00461              get_class( $<span class="dox_keyword">this</span> ) != <span class="dox_stringliteral">"ezdebug"</span> )
00462             $<span class="dox_keyword">this</span> =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00463         $this-&gt;StoreLog = $store;
00464     }
00465 
<a name="l00469"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a9">00469</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a9">addTimingPoint</a>( $description = <span class="dox_stringliteral">""</span> )
00470     {
00471         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00472             <span class="dox_keywordflow">return</span>;
00473         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d0">eZDebug::showMessage</a>( EZ_SHOW_TIMING_POINT ) )
00474             <span class="dox_keywordflow">return</span>;
00475         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00476 
00477         $time = microtime();
00478         $tp = array( <span class="dox_stringliteral">"Time"</span> =&gt; $time,
00479                      <span class="dox_stringliteral">"Description"</span> =&gt; $description );
00480         $debug-&gt;TimePoints[] = $tp;
00481         $desc = <span class="dox_stringliteral">"Timing Point: $description"</span>;
00482         foreach ( array( EZ_LEVEL_NOTICE, EZ_LEVEL_WARNING, EZ_LEVEL_ERROR, EZ_LEVEL_DEBUG ) as $lvl )
00483         {
00484             <span class="dox_keywordflow">if</span> ( isset( $debug-&gt;TmpTimePoints[$lvl] ) )
00485                 $debug-&gt;TmpTimePoints[$lvl] = array();
00486             <span class="dox_keywordflow">if</span> ( $debug-&gt;TmpTimePoints[$lvl] === <span class="dox_keyword">false</span> and
00487                  $debug-&gt;isLogFileEnabled( $lvl ) )
00488             {
00489                 $files =&amp; $debug-&gt;logFiles();
00490                 $file = $files[$lvl];
00491                 $debug-&gt;writeFile( $file, $desc, $lvl );
00492             }
00493             <span class="dox_keywordflow">else</span>
00494                 array_push( $debug-&gt;TmpTimePoints[$lvl],  $tp );
00495         }
00496         $debug-&gt;write( $description, EZ_LEVEL_TIMING_POINT );
00497     }
00498 
<a name="l00502"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a10">00502</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a10">write</a>( $string, $verbosityLevel = EZ_LEVEL_NOTICE, $label=<span class="dox_stringliteral">""</span> )
00503     {
00504         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00505             <span class="dox_keywordflow">return</span>;
00506         <span class="dox_keywordflow">switch</span> ( $verbosityLevel )
00507         {
00508             <span class="dox_keywordflow">case</span> EZ_LEVEL_NOTICE:
00509             <span class="dox_keywordflow">case</span> EZ_LEVEL_WARNING:
00510             <span class="dox_keywordflow">case</span> EZ_LEVEL_ERROR:
00511             <span class="dox_keywordflow">case</span> EZ_LEVEL_DEBUG:
00512             <span class="dox_keywordflow">case</span> EZ_LEVEL_TIMING_POINT:
00513                 <span class="dox_keywordflow">break</span>;
00514 
00515             <span class="dox_keywordflow">default</span>:
00516                 $verbosityLevel = EZ_LEVEL_ERROR;
00517             <span class="dox_keywordflow">break</span>;
00518         }
00519         <span class="dox_keywordflow">if</span> ( $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o11">MessageOutput</a> &amp; EZ_OUTPUT_MESSAGE_SCREEN )
00520         {
00521             print( <span class="dox_stringliteral">"$verbosityLevel: $string ($label)\n"</span> );
00522         }
00523         $files =&amp; $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a13">logFiles</a>();
00524         $fileName = <span class="dox_keyword">false</span>;
00525         <span class="dox_keywordflow">if</span> ( isset( $files[$verbosityLevel] ) )
00526             $fileName = $files[$verbosityLevel];
00527         <span class="dox_keywordflow">if</span> ( $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o11">MessageOutput</a> &amp; EZ_OUTPUT_MESSAGE_STORE )
00528         {
00529             $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o0">DebugStrings</a>[] = array( <span class="dox_stringliteral">"Level"</span> =&gt; $verbosityLevel,
00530                                            <span class="dox_stringliteral">"IP"</span> =&gt; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZSys#a3">eZSys::serverVariable</a>( 'REMOTE_ADDR', <span class="dox_keyword">true</span> ),
00531                                            <span class="dox_stringliteral">"Time"</span> =&gt; time(),
00532                                            <span class="dox_stringliteral">"Label"</span> =&gt; $label,
00533                                            <span class="dox_stringliteral">"String"</span> =&gt; $string );
00534 
00535             <span class="dox_keywordflow">if</span> ( $fileName !== <span class="dox_keyword">false</span> )
00536             {
00537                 $timePoints = $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o2">TmpTimePoints</a>[$verbosityLevel];
00538                 <span class="dox_keywordflow">if</span> ( is_array( $timePoints ) )
00539                 {
00540                     <span class="dox_keywordflow">if</span> ( $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a11">isLogFileEnabled</a>( $verbosityLevel ) )
00541                     {
00542                         foreach ( $timePoints as $tp )
00543                         {
00544                             $desc = <span class="dox_stringliteral">"Timing Point: "</span> . $tp[<span class="dox_stringliteral">"Description"</span>];
00545                             <span class="dox_keywordflow">if</span> ( $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a11">isLogFileEnabled</a>( $verbosityLevel ) )
00546                             {
00547                                 $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c0">writeFile</a>( $fileName, $desc, $verbosityLevel );
00548                             }
00549                         }
00550                     }
00551                     $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o2">TmpTimePoints</a>[$verbosityLevel] = <span class="dox_keyword">false</span>;
00552                 }
00553                 <span class="dox_keywordflow">if</span> ( $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a11">isLogFileEnabled</a>( $verbosityLevel ) )
00554                 {
00555                     $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c0">writeFile</a>( $fileName, $string, $verbosityLevel );
00556                 }
00557             }
00558         }
00559     }
00560 
<a name="l00565"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d6">00565</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d6">maxLogSize</a>()
00566     {
00567         $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d6">maxLogSize</a> =&amp; $GLOBALS['eZDebugMaxLogSize'];
00568         <span class="dox_keywordflow">if</span> ( isset( $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d6">maxLogSize</a> ) )
00569             <span class="dox_keywordflow">return</span> $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d6">maxLogSize</a>;
00570         <span class="dox_keywordflow">return</span> EZ_DEBUG_MAX_LOGFILE_SIZE;
00571     }
00572 
<a name="l00577"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d7">00577</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d7">setMaxLogSize</a>( $size )
00578     {
00579         $GLOBALS['eZDebugMaxLogSize'] = $size;
00580     }
00581 
<a name="l00586"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d8">00586</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d8">maxLogrotateFiles</a>()
00587     {
00588         $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d8">maxLogrotateFiles</a> =&amp; $GLOBALS['eZDebugMaxLogrotateFiles'];
00589         <span class="dox_keywordflow">if</span> ( isset( $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d8">maxLogrotateFiles</a> ) )
00590             <span class="dox_keywordflow">return</span> $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d8">maxLogrotateFiles</a>;
00591         <span class="dox_keywordflow">return</span> EZ_DEBUG_MAX_LOGROTATE_FILES;
00592     }
00593 
<a name="l00598"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d9">00598</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d9">setLogrotateFiles</a>( $files )
00599     {
00600         $GLOBALS['eZDebugMaxLogrotateFiles'] = $filse;
00601     }
00602 
<a name="l00610"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d10">00610</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d10">rotateLog</a>( $fileName )
00611     {
00612         $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d8">maxLogrotateFiles</a> = <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d8">eZDebug::maxLogrotateFiles</a>();
00613         <span class="dox_keywordflow">for</span> ( $i = $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d8">maxLogrotateFiles</a>; $i &gt; 0; --$i )
00614         {
00615             $logRotateName = $fileName . <span class="dox_charliteral">'.'</span> . $i;
00616             <span class="dox_keywordflow">if</span> ( @file_exists( $logRotateName ) )
00617             {
00618                 <span class="dox_keywordflow">if</span> ( $i == $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d8">maxLogrotateFiles</a> )
00619                 {
00620                     @unlink( $logRotateName );
00621 <span class="dox_comment">//                     print( "@unlink( $logRotateName )&lt;br/&gt;" );</span>
00622                 }
00623                 <span class="dox_keywordflow">else</span>
00624                 {
00625                     $newLogRotateName = $fileName . <span class="dox_charliteral">'.'</span> . ($i + 1);
00626                     @rename( $logRotateName, $newLogRotateName );
00627 <span class="dox_comment">//                     print( "@rename( $logRotateName, $newLogRotateName )&lt;br/&gt;" );</span>
00628                 }
00629             }
00630         }
00631         <span class="dox_keywordflow">if</span> ( @file_exists( $fileName ) )
00632         {
00633             $newLogRotateName = $fileName . <span class="dox_charliteral">'.'</span> . 1;
00634             @rename( $fileName, $newLogRotateName );
00635 <span class="dox_comment">//             print( "@rename( $fileName, $newLogRotateName )&lt;br/&gt;" );</span>
00636             <span class="dox_keywordflow">return</span> <span class="dox_keyword">true</span>;
00637         }
00638         <span class="dox_keywordflow">return</span> <span class="dox_keyword">false</span>;
00639     }
00640 
<a name="l00645"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c0">00645</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c0">writeFile</a>( &amp;$logFileData, &amp;$string, $verbosityLevel )
00646     {
00647         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00648             <span class="dox_keywordflow">return</span>;
00649         <span class="dox_keywordflow">if</span> ( !$this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a11">isLogFileEnabled</a>( $verbosityLevel ) )
00650             <span class="dox_keywordflow">return</span>;
00651         $oldHandleType = <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a4">eZDebug::setHandleType</a>( EZ_HANDLE_TO_PHP );
00652         $logDir = $logFileData[0];
00653         $logName = $logFileData[1];
00654         $fileName = $logDir . $logName;
00655         <span class="dox_keywordflow">if</span> ( !file_exists( $logDir ) )
00656         {
00657             include_once( 'lib/ezutils/classes/ezdir.php' );
00658             <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDir#d0">eZDir::mkdir</a>( $logDir, 0775, <span class="dox_keyword">true</span> );
00659         }
00660         $oldumask = @umask( 0 );
00661         $fileExisted = @file_exists( $fileName );
00662         <span class="dox_keywordflow">if</span> ( $fileExisted and
00663              filesize( $fileName ) &gt; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d6">eZDebug::maxLogSize</a>() )
00664         {
00665             <span class="dox_keywordflow">if</span> ( <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d10">eZDebug::rotateLog</a>( $fileName ) )
00666                 $fileExisted = <span class="dox_keyword">false</span>;
00667         }
00668         $logFile = @fopen( $fileName, <span class="dox_stringliteral">"a"</span> );
00669         <span class="dox_keywordflow">if</span> ( $logFile )
00670         {
00671             $time = strftime( <span class="dox_stringliteral">"%b %d %Y %H:%M:%S"</span>, strtotime( <span class="dox_stringliteral">"now"</span> ) );
00672             $notice = <span class="dox_stringliteral">"[ "</span> . $time . <span class="dox_stringliteral">" ] ["</span> . <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZSys#a3">eZSys::serverVariable</a>( 'REMOTE_ADDR', <span class="dox_keyword">true</span> ) . <span class="dox_stringliteral">"] "</span> . $string . <span class="dox_stringliteral">"\n"</span>;
00673             @fwrite( $logFile, $notice );
00674             @fclose( $logFile );
00675             <span class="dox_keywordflow">if</span> ( !$fileExisted )
00676                 @chmod( $fileName, 0664 );
00677             @umask( $oldumask );
00678         }
00679         <span class="dox_keywordflow">else</span>
00680         {
00681             @umask( $oldumask );
00682             $logEnabled = $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a11">isLogFileEnabled</a>( $verbosityLevel );
00683             $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d11">setLogFileEnabled</a>( <span class="dox_keyword">false</span>, $verbosityLevel );
00684             <span class="dox_keywordflow">if</span> ( $verbosityLevel != EZ_LEVEL_ERROR or
00685                  $logEnabled )
00686             {
00687                 <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a4">eZDebug::setHandleType</a>( $oldHandleType );
00688                 $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d4">writeError</a>( <span class="dox_stringliteral">"Cannot open log file '$fileName' for writing\n"</span> .
00689                                    <span class="dox_stringliteral">"The web server must be allowed to modify the file.\n"</span> .
00690                                    <span class="dox_stringliteral">"File logging for '$fileName' is disabled."</span> , '<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c0">eZDebug::writeFile</a>' );
00691             }
00692         }
00693         <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a4">eZDebug::setHandleType</a>( $oldHandleType );
00694     }
00695 
<a name="l00701"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d11">00701</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d11">setLogFileEnabled</a>( $enabled, $types = <span class="dox_keyword">false</span> )
00702     {
00703         <span class="dox_keywordflow">if</span> ( !isset( $<span class="dox_keyword">this</span> ) or
00704              get_class( $<span class="dox_keyword">this</span> ) != <span class="dox_stringliteral">"ezdebug"</span> )
00705             $<span class="dox_keyword">this</span> =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00706         <span class="dox_keywordflow">if</span> ( $types === <span class="dox_keyword">false</span> )
00707             $types =&amp; $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a12">messageTypes</a>();
00708         <span class="dox_keywordflow">if</span> ( !is_array( $types ) )
00709             $types = array( $types );
00710         foreach ( $types as $type )
00711         {
00712             $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o13">LogFileEnabled</a>[$type] = $enabled;
00713         }
00714     }
00715 
<a name="l00719"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a11">00719</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a11">isLogFileEnabled</a>( $type )
00720     {
00721         <span class="dox_keywordflow">return</span> $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o13">LogFileEnabled</a>[$type];
00722     }
00723 
<a name="l00727"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a12">00727</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a12">messageTypes</a>()
00728     {
00729         <span class="dox_keywordflow">return</span> $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o12">MessageTypes</a>;
00730     }
00731 
<a name="l00736"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a13">00736</a>     function &amp;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a13">logFiles</a>()
00737     {
00738         <span class="dox_keywordflow">return</span> $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o7">LogFiles</a>;
00739     }
00740 
<a name="l00746"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">00746</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">isDebugEnabled</a>()
00747     {
00748         $debugEnabled =&amp; $GLOBALS['eZDebugEnabled'];
00749         <span class="dox_keywordflow">if</span> ( isset( $debugEnabled ) )
00750             <span class="dox_keywordflow">return</span> $debugEnabled;
00751 
00752         <span class="dox_keywordflow">return</span> <span class="dox_keyword">false</span>;
00753     }
00754 
<a name="l00763"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d13">00763</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d13">updateSettings</a>( $settings )
00764     {
00765         <span class="dox_comment">// Make sure errors are handled by PHP when we read, including our own debug output.</span>
00766         $oldHandleType = <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a4">eZDebug::setHandleType</a>( EZ_HANDLE_TO_PHP );
00767 
00768         $debugEnabled =&amp; $GLOBALS['eZDebugEnabled'];
00769 
00770         $debugEnabled = $settings['debug-enabled'];
00771         <span class="dox_keywordflow">if</span> ( $settings['debug-enabled'] and
00772              $settings['debug-by-ip'] )
00773         {
00774             $ipAddress = <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZSys#a3">eZSys::serverVariable</a>( 'REMOTE_ADDR' );
00775             $debugEnabled = in_array( $ipAddress, $settings['debug-ip-list'] );
00776         }
00777         <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a4">eZDebug::setHandleType</a>( $oldHandleType );
00778     }
00779 
<a name="l00784"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d14">00784</a>     function &amp;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d14">printReport</a>( $newWindow = <span class="dox_keyword">false</span>, $as_html = <span class="dox_keyword">true</span>, $returnReport = <span class="dox_keyword">false</span> )
00785     {
00786         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00787             <span class="dox_keywordflow">return</span> null;
00788 
00789         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00790         $report =&amp; $debug-&gt;printReportInternal( $as_html );
00791 
00792 
00793         <span class="dox_keywordflow">if</span> ( $newWindow == <span class="dox_keyword">true</span> )
00794         {
00795             $wwwDir = <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZSys#d9">eZSys::wwwDir</a>();
00796             print( <span class="dox_stringliteral">"</span>
00797 <span class="dox_stringliteral">&lt;SCRIPT LANGUAGE='JavaScript'&gt;</span>
00798 <span class="dox_stringliteral">&lt;!-- hide this script from old browsers</span>
00799 <span class="dox_stringliteral"></span>
00800 <span class="dox_stringliteral">function showDebug( fileName, title )</span>
00801 <span class="dox_stringliteral">{</span>
00802 <span class="dox_stringliteral">  debugWindow = window.open( '$wwwDir/var/cache/debug.html', 'ezdebug', 'width=500,height=550,status,scrollbars,resizable,screenX=0,screenY=20,left=20,top=40');</span>
00803 <span class="dox_stringliteral">  debugWindow.document.close();</span>
00804 <span class="dox_stringliteral">  debugWindow.location.reload();</span>
00805 <span class="dox_stringliteral">}</span>
00806 <span class="dox_stringliteral"></span>
00807 <span class="dox_stringliteral">showDebug();</span>
00808 <span class="dox_stringliteral"></span>
00809 <span class="dox_stringliteral">ezdebug.reload();</span>
00810 <span class="dox_stringliteral"></span>
00811 <span class="dox_stringliteral"></span>
00812 <span class="dox_stringliteral">// done hiding from old browsers --&gt;</span>
00813 <span class="dox_stringliteral">&lt;/SCRIPT&gt;</span>
00814 <span class="dox_stringliteral">"</span> );
00815             $header = <span class="dox_stringliteral">"&lt;html&gt;&lt;head&gt;&lt;title&gt;eZ debug&lt;/title&gt;&lt;/head&gt;&lt;body&gt;"</span>;
00816             $footer = <span class="dox_stringliteral">"&lt;/body&gt;&lt;/html&gt;"</span>;
00817             $varDirectory = <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZSys#d5">eZSys::varDirectory</a>();
00818             $fp = fopen( <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDir#d4">eZDir::path</a>( array( $varDirectory, 'cache', 'debug.html' ) ), <span class="dox_stringliteral">"w+"</span> );
00819 
00820             fwrite( $fp, $header );
00821             fwrite( $fp, $report );
00822             fwrite( $fp, $footer );
00823             fclose( $fp );
00824         }
00825         <span class="dox_keywordflow">else</span>
00826         {
00827             <span class="dox_keywordflow">if</span> ( !$returnReport )
00828                 print( $report );
00829             <span class="dox_keywordflow">else</span>
00830                 <span class="dox_keywordflow">return</span> $report;
00831         }
00832         <span class="dox_keywordflow">return</span> null;
00833     }
00834 
<a name="l00839"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c1">00839</a>     function &amp;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c1">timeToFloat</a>( $mtime )
00840     {
00841         $tTime = explode( <span class="dox_stringliteral">" "</span>, $mtime );
00842         ereg( <span class="dox_stringliteral">"0\.([0-9]+)"</span>, <span class="dox_stringliteral">""</span> . $tTime[0], $t1 );
00843         $time = $tTime[1] . <span class="dox_stringliteral">"."</span> . $t1[1];
00844         <span class="dox_keywordflow">return</span> $time;
00845     }
00846 
<a name="l00852"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a14">00852</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a14">setScriptStart</a>( $mtime = <span class="dox_keyword">false</span> )
00853     {
00854         <span class="dox_keywordflow">if</span> ( $mtime == <span class="dox_keyword">false</span> )
00855             $mtime = microtime();
00856         $time = <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c1">eZDebug::timeToFloat</a>( microtime() );
00857         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00858         $debug-&gt;ScriptStart = $time;
00859     }
00860 
<a name="l00865"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a15">00865</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a15">createAccumulatorGroup</a>( $key, $name = <span class="dox_keyword">false</span> )
00866     {
00867         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00868             <span class="dox_keywordflow">return</span>;
00869         <span class="dox_keywordflow">if</span> ( $name == '' or
00870              $name === <span class="dox_keyword">false</span> )
00871             $name = $key;
00872         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00873         <span class="dox_keywordflow">if</span> ( !array_key_exists( $key, $debug-&gt;TimeAccumulatorList ) )
00874             $debug-&gt;TimeAccumulatorList[$key] = array( 'name' =&gt; $name,  'time' =&gt; 0, 'count' =&gt; 0, 'is_group' =&gt; <span class="dox_keyword">true</span>, 'in_group' =&gt; <span class="dox_keyword">false</span> );
00875         <span class="dox_keywordflow">if</span> ( !array_key_exists( $key, $debug-&gt;TimeAccumulatorGroupList ) )
00876             $debug-&gt;TimeAccumulatorGroupList[$key] = array();
00877     }
00878 
<a name="l00884"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a16">00884</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a16">createAccumulator</a>( $key, $inGroup = <span class="dox_keyword">false</span>, $name = <span class="dox_keyword">false</span> )
00885     {
00886         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00887             <span class="dox_keywordflow">return</span>;
00888         <span class="dox_keywordflow">if</span> ( $name == '' or
00889              $name === <span class="dox_keyword">false</span> )
00890             $name = $key;
00891         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00892         $isGroup = <span class="dox_keyword">false</span>;
00893         <span class="dox_keywordflow">if</span> ( array_key_exists( $key, $debug-&gt;TimeAccumulatorList ) and
00894              array_key_exists( $key, $debug-&gt;TimeAccumulatorGroupList ) )
00895             $isGroup = <span class="dox_keyword">true</span>;
00896         $debug-&gt;TimeAccumulatorList[$key] = array( 'name' =&gt; $name,  'time' =&gt; 0, 'count' =&gt; 0, 'is_group' =&gt; $isGroup, 'in_group' =&gt; $inGroup );
00897         <span class="dox_keywordflow">if</span> ( $inGroup !== <span class="dox_keyword">false</span> )
00898         {
00899             $groupKeys = array();
00900             <span class="dox_keywordflow">if</span> ( array_key_exists( $inGroup, $debug-&gt;TimeAccumulatorGroupList ) )
00901                 $groupKeys = $debug-&gt;TimeAccumulatorGroupList[$inGroup];
00902             $debug-&gt;TimeAccumulatorGroupList[$inGroup] = array_unique( array_merge( $groupKeys, array( $key ) ) );
00903             <span class="dox_keywordflow">if</span> ( array_key_exists( $inGroup, $debug-&gt;TimeAccumulatorList ) )
00904                 $debug-&gt;TimeAccumulatorList[$inGroup]['is_group'] = <span class="dox_keyword">true</span>;
00905         }
00906     }
00907 
<a name="l00912"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a17">00912</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a17">accumulatorStart</a>( $key, $inGroup = <span class="dox_keyword">false</span>, $name = <span class="dox_keyword">false</span> )
00913     {
00914         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00915             <span class="dox_keywordflow">return</span>;
00916         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00917         <span class="dox_keywordflow">if</span> ( ! array_key_exists( $key, $debug-&gt;TimeAccumulatorList ) )
00918         {
00919             $debug-&gt;createAccumulator( $key, $inGroup, $name );
00920         }
00921 
00922         $accumulator =&amp; $debug-&gt;TimeAccumulatorList[$key];
00923         $accumulator['temp_time'] = $debug-&gt;timeToFloat( microtime() );
00924     }
00925 
<a name="l00929"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a18">00929</a>     function <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a18">accumulatorStop</a>( $key )
00930     {
00931         <span class="dox_keywordflow">if</span> ( !<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d12">eZDebug::isDebugEnabled</a>() )
00932             <span class="dox_keywordflow">return</span>;
00933         $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
00934         $stopTime = $debug-&gt;timeToFloat( microtime() );
00935         <span class="dox_keywordflow">if</span> ( ! array_key_exists( $key, $debug-&gt;TimeAccumulatorList ) )
00936         {
00937             <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#d3">eZDebug::writeWarning</a>( 'Accumulator $key does not exists, run <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a17">eZDebug::accumulatorStart</a> first', '<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a18">eZDebug::accumulatorStop</a>' );
00938             <span class="dox_keywordflow">return</span>;
00939         }
00940         $accumulator =&amp; $debug-&gt;TimeAccumulatorList[$key];
00941         $diffTime = $stopTime - $accumulator['temp_time'];
00942         $accumulator['time'] = $accumulator['time'] + $diffTime;
00943         ++$accumulator['count'];
00944     }
00945 
00946 
<a name="l00951"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c2">00951</a>     function &amp;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c2">printReportInternal</a>( $as_html = <span class="dox_keyword">true</span> )
00952     {
00953         $endTime = microtime();
00954         $returnText = <span class="dox_stringliteral">""</span>;
00955         <span class="dox_keywordflow">if</span> ( $as_html )
00956         {
00957             $returnText .= <span class="dox_stringliteral">"&lt;table style='border: 1px dashed black;' bgcolor=\"#fefefe\"&gt;"</span>;
00958             $returnText .= <span class="dox_stringliteral">"&lt;tr&gt;&lt;th&gt;&lt;h1&gt;eZ debug&lt;/h1&gt;&lt;/th&gt;&lt;/tr&gt;"</span>;
00959             $returnText .= <span class="dox_stringliteral">"&lt;tr&gt;&lt;td&gt;"</span>;
00960 
00961             <span class="dox_keywordflow">if</span> ( !$this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o10">UseCSS</a> )
00962             {
00963                 $returnText .= <span class="dox_stringliteral">"&lt;STYLE TYPE='text/css'&gt;</span>
00964 <span class="dox_stringliteral">                &lt;!--</span>
00965 <span class="dox_stringliteral">td.debugheader</span>
00966 <span class="dox_stringliteral">\{</span>
00967 <span class="dox_stringliteral">    background-color : #eeeeee;</span>
00968 <span class="dox_stringliteral">    border-top : 1px solid #444488;</span>
00969 <span class="dox_stringliteral">    border-bottom : 1px solid #444488;</span>
00970 <span class="dox_stringliteral">    font-size : 65%;</span>
00971 <span class="dox_stringliteral">    font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;</span>
00972 <span class="dox_stringliteral">\}</span>
00973 <span class="dox_stringliteral"></span>
00974 <span class="dox_stringliteral">td.timingpoint1</span>
00975 <span class="dox_stringliteral">\{</span>
00976 <span class="dox_stringliteral">    background-color : #ffffff;</span>
00977 <span class="dox_stringliteral">    border-top : 1px solid #444488;</span>
00978 <span class="dox_stringliteral">    font-size : 65%;</span>
00979 <span class="dox_stringliteral">    font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;</span>
00980 <span class="dox_stringliteral">\}</span>
00981 <span class="dox_stringliteral"></span>
00982 <span class="dox_stringliteral">td.timingpoint2</span>
00983 <span class="dox_stringliteral">\{</span>
00984 <span class="dox_stringliteral">    background-color : #eeeeee;</span>
00985 <span class="dox_stringliteral">    border-top : 1px solid #444488;</span>
00986 <span class="dox_stringliteral">    font-size : 65%;</span>
00987 <span class="dox_stringliteral">    font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;</span>
00988 <span class="dox_stringliteral">\}</span>
00989 <span class="dox_stringliteral"></span>
00990 <span class="dox_stringliteral">--&gt;</span>
00991 <span class="dox_stringliteral">&lt;/STYLE&gt;"</span>;
00992             }
00993             $returnText .= <span class="dox_stringliteral">"&lt;table style='border: 1px light gray;' cellspacing='0'&gt;"</span>;
00994         }
00995 
00996         foreach ( $this-&gt;DebugStrings as $debug )
00997         {
00998             $time = strftime (<span class="dox_stringliteral">"%b %d %Y %H:%M:%S"</span>, strtotime( <span class="dox_stringliteral">"now"</span> ) );
00999 
01000             $outputData = $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o6">OutputFormat</a>[$debug[<span class="dox_stringliteral">"Level"</span>]];
01001             <span class="dox_keywordflow">if</span> ( is_array( $outputData ) )
01002             {
01003                 $color = $outputData[<span class="dox_stringliteral">"color"</span>];
01004                 $name = $outputData[<span class="dox_stringliteral">"name"</span>];
01005                 $label = $debug[<span class="dox_stringliteral">"Label"</span>];
01006                 <span class="dox_keywordflow">if</span> ( $as_html )
01007                 {
01008                     $label = htmlspecialchars( $label );
01009                     $returnText .= <span class="dox_stringliteral">"&lt;tr&gt;&lt;td class='debugheader' valign='top'&gt;&lt;b&gt;&lt;font color=\"$color\"&gt;$name:&lt;/font&gt; $label&lt;/b&gt;&lt;/td&gt;</span>
01010 <span class="dox_stringliteral">                                    &lt;td class='debugheader' valign='top'&gt;$time&lt;/td&gt;&lt;/tr&gt;</span>
01011 <span class="dox_stringliteral">                                    &lt;tr&gt;&lt;td colspan='2'&gt;&lt;pre&gt;"</span> .  htmlspecialchars( $debug[<span class="dox_stringliteral">"String"</span>] )  . <span class="dox_stringliteral">"&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;"</span>;
01012                 }
01013                 <span class="dox_keywordflow">else</span>
01014                 {
01015                     $returnText .= <span class="dox_stringliteral">"$name: ($label)\n"</span> . $debug[<span class="dox_stringliteral">"String"</span>] . <span class="dox_stringliteral">"\n\n"</span>;
01016                 }
01017             }
01018         }
01019         <span class="dox_keywordflow">if</span> ( $as_html )
01020         {
01021             $returnText .= <span class="dox_stringliteral">"&lt;/table&gt;"</span>;
01022 
01023             $returnText .= <span class="dox_stringliteral">"&lt;h2&gt;Timing points:&lt;/h2&gt;"</span>;
01024             $returnText .= <span class="dox_stringliteral">"&lt;table style='border: 1px dashed black;' cellspacing='0'&gt;&lt;tr&gt;&lt;th&gt;Checkpoint&lt;/th&gt;&lt;th&gt;Elapsed&lt;/th&gt;&lt;th&gt;Rel. Elapsed&lt;/th&gt;&lt;/tr&gt;"</span>;
01025         }
01026         $startTime = <span class="dox_keyword">false</span>;
01027         $elapsed = 0.00;
01028         $relElapsed = 0.00;
01029         <span class="dox_keywordflow">for</span> ( $i = 0; $i &lt; count( $this-&gt;TimePoints ); ++$i )
01030         {
01031             $point = $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o1">TimePoints</a>[$i];
01032             $nextPoint = <span class="dox_keyword">false</span>;
01033             <span class="dox_keywordflow">if</span> ( isset( $this-&gt;TimePoints[$i + 1] ) )
01034                $nextPoint = $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o1">TimePoints</a>[$i + 1];
01035             $time = $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c1">timeToFloat</a>( $point[<span class="dox_stringliteral">"Time"</span>] );
01036             $nextTime = <span class="dox_keyword">false</span>;
01037             <span class="dox_keywordflow">if</span> ( $nextPoint !== <span class="dox_keyword">false</span> )
01038                 $nextTime = $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c1">timeToFloat</a>( $nextPoint[<span class="dox_stringliteral">"Time"</span>] );
01039             <span class="dox_keywordflow">if</span> ( $startTime === <span class="dox_keyword">false</span> )
01040                 $startTime = $time;
01041             $elapsed = $time - $startTime;
01042             $relElapsed = $nextTime - $time;
01043 
01044             <span class="dox_keywordflow">if</span> ( $i % 2 == 0 )
01045                $<span class="dox_keyword">class </span>= "timingpoint1";
01046             <span class="dox_keywordflow">else</span>
01047                $<span class="dox_keyword">class </span>= "timingpoint2";
01048 
01049             <span class="dox_keywordflow">if</span> ( $as_html )
01050             {
01051                 $returnText .= <span class="dox_stringliteral">"&lt;tr&gt;&lt;td class='$class'&gt;"</span> . $point[<span class="dox_stringliteral">"Description"</span>] . <span class="dox_stringliteral">"&lt;/td&gt;&lt;td class='$class'&gt;"</span> .
01052                                number_format( ( $elapsed ), $this-&gt;TimingAccuracy ) . <span class="dox_stringliteral">" sec&lt;/td&gt;&lt;td class='$class'&gt;"</span>.
01053                                ( empty( $nextPoint ) ? <span class="dox_stringliteral">"&amp;nbsp;"</span> : number_format( ( $relElapsed ), $this-&gt;TimingAccuracy ) . <span class="dox_stringliteral">" sec"</span> ) . <span class="dox_stringliteral">"&lt;/td&gt;"</span>
01054                                . <span class="dox_stringliteral">"&lt;/tr&gt;"</span>;
01055             }
01056             <span class="dox_keywordflow">else</span>
01057             {
01058                 $returnText .= $point[<span class="dox_stringliteral">"Description"</span>] .
01059                                number_format( ( $elapsed ), $this-&gt;TimingAccuracy ) . <span class="dox_stringliteral">" sec"</span>.
01060                                ( empty( $nextPoint ) ? <span class="dox_stringliteral">""</span> : number_format( ( $relElapsed ), $this-&gt;TimingAccuracy ) . <span class="dox_stringliteral">" sec"</span> ) . <span class="dox_stringliteral">"\n"</span>;
01061             }
01062         }
01063 
01064         <span class="dox_keywordflow">if</span> ( count( $this-&gt;TimePoints ) &gt; 0 )
01065         {
01066             $tTime = explode( <span class="dox_stringliteral">" "</span>, $endTime );
01067             ereg( <span class="dox_stringliteral">"0\.([0-9]+)"</span>, <span class="dox_stringliteral">""</span> . $tTime[0], $t1 );
01068             $endTime = $tTime[1] . <span class="dox_stringliteral">"."</span> . $t1[1];
01069 
01070             $totalElapsed = $endTime - $startTime;
01071 
01072             <span class="dox_keywordflow">if</span> ( $as_html )
01073             {
01074                 $returnText .= <span class="dox_stringliteral">"&lt;tr&gt;&lt;td&gt;&lt;b&gt;Total runtime:&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;"</span> .
01075                        number_format( ( $totalElapsed ), $this-&gt;TimingAccuracy ) . <span class="dox_stringliteral">" sec&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;"</span>;
01076             }
01077             <span class="dox_keywordflow">else</span>
01078             {
01079                 $returnText .= <span class="dox_stringliteral">"Total runtime: "</span> .
01080                        number_format( ( $totalElapsed ), $this-&gt;TimingAccuracy ) . <span class="dox_stringliteral">" sec\n"</span>;
01081             }
01082         }
01083         <span class="dox_keywordflow">else</span>
01084         {
01085             <span class="dox_keywordflow">if</span> ( $as_html )
01086                 $returnText .= <span class="dox_stringliteral">"&lt;tr&gt;&lt;td&gt; No timing points defined&lt;/td&gt;&lt;td&gt;"</span>;
01087             <span class="dox_keywordflow">else</span>
01088                 $returnText .= <span class="dox_stringliteral">"No timing points defined\n"</span>;
01089         }
01090         <span class="dox_keywordflow">if</span> ( $as_html )
01091         {
01092             $returnText .= <span class="dox_stringliteral">"&lt;/table&gt;"</span>;
01093 
01094 
01095         }
01096 
01097         <span class="dox_keywordflow">if</span> ( $as_html )
01098         {
01099             $returnText .= <span class="dox_stringliteral">"&lt;h2&gt;Time accumulators:&lt;/h2&gt;"</span>;
01100             $returnText .= <span class="dox_stringliteral">"&lt;table style='border: 1px dashed black;' cellspacing='0'&gt;&lt;tr&gt;&lt;th&gt;&amp;nbsp;Accumulator&lt;/th&gt;&lt;th&gt;&amp;nbsp;Elapsed&lt;/th&gt;&lt;th&gt;&amp;nbsp;Percent&lt;/th&gt;&lt;th&gt;&amp;nbsp;Count&lt;/th&gt;&lt;th&gt;&amp;nbsp;Average&lt;/th&gt;&lt;/tr&gt;"</span>;
01101             $i = 0;
01102         }
01103 
01104         $scriptEndTime = <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#c1">eZDebug::timeToFloat</a>( microtime() );
01105         $totalElapsed = $scriptEndTime - $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o14">ScriptStart</a>;
01106         $timeList = $this-&gt;<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o3">TimeAccumulatorList</a>;
01107         $groups = $this-&gt;TimeAccumulatorGroupList;
01108         $groupList = array();
01109         foreach ( $groups as $groupKey =&gt; $keyList )
01110         {
01111             <span class="dox_keywordflow">if</span> ( count( $keyList ) == 0 and
01112                  !array_key_exists( $groupKey, $timeList ) )
01113                 <span class="dox_keywordflow">continue</span>;
01114             $groupList[$groupKey] = array( 'name' =&gt; $groupKey );
01115             <span class="dox_keywordflow">if</span> ( array_key_exists( $groupKey, $timeList ) )
01116             {
01117                 <span class="dox_keywordflow">if</span> ( $timeList[$groupKey]['time'] != 0 )
01118                     $groupList[$groupKey]['time_data'] = $timeList[$groupKey];
01119                 $groupList[$groupKey]['name'] = $timeList[$groupKey]['name'];
01120                 unset( $timeList[$groupKey] );
01121             }
01122             $groupChildren = array();
01123             foreach ( $keyList as $timeKey )
01124             {
01125                 <span class="dox_keywordflow">if</span> ( array_key_exists( $timeKey, $timeList ) )
01126                 {
01127                     $groupChildren[] = $timeList[$timeKey];
01128                     unset( $timeList[$timeKey] );
01129                 }
01130             }
01131             $groupList[$groupKey]['children'] = $groupChildren;
01132         }
01133         <span class="dox_keywordflow">if</span> ( count( $timeList ) &gt; 0 )
01134         {
01135             $groupList['general'] = array( 'name' =&gt; 'General',
01136                                            'children' =&gt; $timeList );
01137         }
01138 
01139         $j = 0;
01140         foreach ( $groupList as $group )
01141         {
01142             <span class="dox_keywordflow">if</span> ( $j % 2 == 0 )
01143                $<span class="dox_keyword">class </span>= "timingpoint1";
01144             <span class="dox_keywordflow">else</span>
01145                $<span class="dox_keyword">class </span>= "timingpoint2";
01146             ++$j;
01147             $groupName = $group['name'];
01148             $groupChildren = $group['children'];
01149             <span class="dox_keywordflow">if</span> ( count( $groupChildren ) == 0 and
01150                  !array_key_exists( 'time_data', $group ) )
01151                 <span class="dox_keywordflow">continue</span>;
01152             <span class="dox_keywordflow">if</span> ( $as_html )
01153                 $returnText .= <span class="dox_stringliteral">"&lt;tr&gt;&lt;td class='$class'&gt;&lt;b&gt;$groupName&lt;/b&gt;&lt;/td&gt;"</span>;
01154             <span class="dox_keywordflow">else</span>
01155                 $returnText .= <span class="dox_stringliteral">"Group $groupName: "</span>;
01156             <span class="dox_keywordflow">if</span> ( array_key_exists( 'time_data', $group ) )
01157             {
01158                 $groupData = $group['time_data'];
01159                 $groupElapsed = number_format( ( $groupData['time'] ), $this-&gt;TimingAccuracy );
01160                 $groupPercent = number_format( ( $groupData['time'] * 100.0 ) / $totalElapsed, 1 );
01161                 $groupCount = $groupData['count'];
01162                 $groupAverage = number_format( ( $groupData['time'] / $groupData['count'] ), $this-&gt;TimingAccuracy );
01163                 <span class="dox_keywordflow">if</span> ( $as_html )
01164                 {
01165                     $returnText .= ( <span class="dox_stringliteral">"&lt;td class=\"$class\"&gt;$groupElapsed sec&lt;/td&gt;"</span>.
01166                                      <span class="dox_stringliteral">"&lt;td class=\"$class\" align=\"right\"&gt; $groupPercent%&lt;/td&gt;"</span>.
01167                                      <span class="dox_stringliteral">"&lt;td class=\"$class\" align=\"right\"&gt; $groupCount&lt;/td&gt;"</span>.
01168                                      <span class="dox_stringliteral">"&lt;td class=\"$class\" align=\"right\"&gt; $groupAverage sec&lt;/td&gt;"</span> );
01169                 }
01170                 <span class="dox_keywordflow">else</span>
01171                 {
01172                     $returnText .= <span class="dox_stringliteral">"$groupElapsed sec ($groupPercent%), $groupAverage avg sec ($groupCount)"</span>;
01173                 }
01174             }
01175             <span class="dox_keywordflow">else</span> <span class="dox_keywordflow">if</span> ( $as_html )
01176             {
01177                     $returnText .= ( <span class="dox_stringliteral">"&lt;td class=\"$class\"&gt;&lt;/td&gt;"</span>.
01178                                      <span class="dox_stringliteral">"&lt;td class=\"$class\"&gt;&lt;/td&gt;"</span>.
01179                                      <span class="dox_stringliteral">"&lt;td class=\"$class\"&gt;&lt;/td&gt;"</span>.
01180                                      <span class="dox_stringliteral">"&lt;td class=\"$class\"&gt;&lt;/td&gt;"</span> );
01181             }
01182             <span class="dox_keywordflow">if</span> ( $as_html )
01183                 $returnText .= <span class="dox_stringliteral">"&lt;/tr&gt;"</span>;
01184             <span class="dox_keywordflow">else</span>
01185                 $returnText .= <span class="dox_stringliteral">"\n"</span>;
01186 
01187             $i = 0;
01188             foreach ( $groupChildren as $child )
01189             {
01190                 $childName = $child['name'];
01191                 $childElapsed = number_format( ( $child['time'] ), $this-&gt;TimingAccuracy );
01192                 $childPercent = number_format( ( $child['time'] * 100.0 ) / $totalElapsed, $this-&gt;PercentAccuracy );
01193                 $childCount = $child['count'];
01194                 $childAverage = 0.0;
01195                 <span class="dox_keywordflow">if</span> ( $childCount &gt; 0 )
01196                 {
01197                     $childAverage = $child['time'] / $childCount;
01198                 }
01199                 $childAverage = number_format( $childAverage, $this-&gt;PercentAccuracy );
01200 
01201                 <span class="dox_keywordflow">if</span> ( $as_html )
01202                 {
01203                     <span class="dox_keywordflow">if</span> ( $i % 2 == 0 )
01204                         $<span class="dox_keyword">class </span>= "timingpoint1";
01205                     <span class="dox_keywordflow">else</span>
01206                         $<span class="dox_keyword">class </span>= "timingpoint2";
01207                     ++$i;
01208 
01209                     $returnText .= ( <span class="dox_stringliteral">"&lt;tr&gt;"</span> .
01210                                      <span class="dox_stringliteral">"&lt;td class=\"$class\"&gt;$childName&lt;/td&gt;"</span> .
01211                                      <span class="dox_stringliteral">"&lt;td class=\"$class\"&gt;$childElapsed sec&lt;/td&gt;"</span> .
01212                                      <span class="dox_stringliteral">"&lt;td class=\"$class\" align=\"right\"&gt;$childPercent%&lt;/td&gt;"</span> .
01213                                      <span class="dox_stringliteral">"&lt;td class=\"$class\" align=\"right\"&gt;$childCount&lt;/td&gt;"</span> .
01214                                      <span class="dox_stringliteral">"&lt;td class=\"$class\" align=\"right\"&gt;$childAverage sec&lt;/td&gt;"</span> .
01215                                      <span class="dox_stringliteral">"&lt;/tr&gt;"</span> );
01216                 }
01217                 <span class="dox_keywordflow">else</span>
01218                 {
01219                     $returnText .= <span class="dox_stringliteral">"$childName: $childElapsed sec ($childPercent%), $childAverage avg sec ($childCount)"</span>;
01220                 }
01221             }
01222         }
01223         <span class="dox_keywordflow">if</span> ( $as_html )
01224         {
01225             $returnText .= <span class="dox_stringliteral">"&lt;tr&gt;&lt;td&gt;&lt;b&gt;Total script time:&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;"</span> . number_format( ( $totalElapsed ), $this-&gt;TimingAccuracy ) . <span class="dox_stringliteral">" sec&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;"</span>;
01226         }
01227         <span class="dox_keywordflow">else</span>
01228         {
01229             $returnText .= <span class="dox_stringliteral">"Total script time: "</span> . number_format( ( $totalElapsed ), $this-&gt;TimingAccuracy ) . <span class="dox_stringliteral">" sec\n"</span>;
01230         }
01231         <span class="dox_keywordflow">if</span> ( $as_html )
01232         {
01233             $returnText .= <span class="dox_stringliteral">"&lt;/table&gt;"</span>;
01234             $returnText .= <span class="dox_stringliteral">"&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;"</span>;
01235         }
01236 
01237         <span class="dox_keywordflow">return</span> $returnText;
01238     }
01239 
01240 
01241 
<a name="l01244"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o0">01244</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o0">DebugStrings</a> = array();
01245 
<a name="l01247"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o1">01247</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o1">TimePoints</a> = array();
01248 
<a name="l01250"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o2">01250</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o2">TmpTimePoints</a>;
01251 
<a name="l01253"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o3">01253</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o3">TimeAccumulatorList</a> = array();
01254 
<a name="l01256"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o4">01256</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o4">ShowTypes</a>;
01257 
<a name="l01259"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o5">01259</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o5">HandleType</a>;
01260 
<a name="l01262"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o6">01262</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o6">OutputFormat</a>;
01263 
<a name="l01265"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o7">01265</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o7">LogFiles</a>;
01266 
<a name="l01268"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o8">01268</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o8">TimingAccuracy</a> = 4;
01269 
<a name="l01271"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o9">01271</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o9">PercentAccuracy</a> = 4;
01272 
<a name="l01274"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o10">01274</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o10">UseCSS</a>;
01275 
<a name="l01277"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o11">01277</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o11">MessageOutput</a>;
01278 
<a name="l01280"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o12">01280</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o12">MessageTypes</a>;
01281 
<a name="l01283"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o13">01283</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o13">LogFileEnabled</a>;
01284 
<a name="l01286"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o14">01286</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o14">ScriptStart</a>;
01287 
<a name="l01289"></a><a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o15">01289</a>     var $<a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#o15">OverrideList</a>;
01290 }
01291 
01297 function eZDebugErrorHandler( $errno, $errstr, $errfile, $errline )
01298 {
01299     <span class="dox_keywordflow">if</span> ( $GLOBALS['eZDebugRecursionFlag'] )
01300     {
01301         print( <span class="dox_stringliteral">"Fatal debug error: A recursion in debug error handler was detected, aborting debug message.&lt;br/&gt;"</span> );
01302         $GLOBALS['eZDebugRecursionFlag'] = <span class="dox_keyword">false</span>;
01303         <span class="dox_keywordflow">return</span>;
01304     }
01305     $GLOBALS['eZDebugRecursionFlag'] = <span class="dox_keyword">true</span>;
01306     $debug =&amp; <a class="dox_code" href="http://web.archive.org/web/20030817122109/http://ez.no/sdk/ref/view/class/eZDebug#a3">eZDebug::instance</a>();
01307     $debug-&gt;errorHandler( $errno, $errstr, $errfile, $errline );
01308     $GLOBALS['eZDebugRecursionFlag'] = <span class="dox_keyword">false</span>;
01309 }
01310 $GLOBALS['eZDebugRecursionFlag'] = <span class="dox_keyword">false</span>;
01311 
01312 ?&gt;
</pre></div>&nbsp;
</td></tr>
</table>
</td>

</tr>
</table>

<br/>
<center>
<a href="http://web.archive.org/web/20030817122109/http://ez.no/developer">eZ publish&trade;</a> copyright &copy; 1999-2003 <a href="http://web.archive.org/web/20030817122109/http://ez.no/">eZ systems as</a>
</center>
<br/>
</body></html><!--
     FILE ARCHIVED ON 12:21:09 Aug 17, 2003 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 20:20:12 Oct 31, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 0.444
  exclusion.robots: 0.015
  exclusion.robots.policy: 0.007
  esindex: 0.009
  cdx.remote: 8.79
  LoadShardBlock: 174.1 (3)
  PetaboxLoader3.datanode: 103.455 (4)
  PetaboxLoader3.resolve: 174.175 (2)
  load_resource: 128.48
-->