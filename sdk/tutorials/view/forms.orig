<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="no" lang="no">

<head><!-- is_embed=True -->
<script type="text/javascript" src="/_static/js/bundle-playback.js?v=krFivnjJ" charset="utf-8"></script>
<script type="text/javascript" src="/_static/js/wombat.js?v=txqj7nKC" charset="utf-8"></script>
<script>window.RufflePlayer=window.RufflePlayer||{};window.RufflePlayer.config={"autoplay":"on","unmuteOverlay":"hidden"};</script>
<script type="text/javascript" src="/_static/js/ruffle/ruffle.js"></script>
<script type="text/javascript">
    __wm.init("http://web.archive.org/web");
  __wm.wombat("http://ez.no:80/sdk/tutorials/view/forms","20030814075436","http://web.archive.org/","web","/_static/",
	      "1060847676");
</script>
<link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=S1zqJCYt" />
<link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=3PDvdIFv" />
<!-- End Wayback Rewrite JS Include -->

<title>eZ publish&trade; SDK - Tutorials</title>
</head>
<head>
<title>eZ publish&trade; SDK</title>
<link rel="stylesheet" type="text/css" href="/web/20030814075436cs_/http://ez.no/design/standard/stylesheets/core.css"/>
<link rel="stylesheet" type="text/css" href="/web/20030814075436cs_/http://ez.no/design/admin/stylesheets/admin.css"/>
<link rel="stylesheet" type="text/css" href="/web/20030814075436cs_/http://ez.no/kernel/sdk/style.css"/>
</head>

<body style="background: url(/web/20030814075436im_/http://ez.no/design/standard/images/grid-background.gif);">


<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
    <td class="headlogo" width="560">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/ezpublish_logo_blue.gif" alt="eZ publish"/></td>
    <td class="headlink" width="66">

<table width="66" cellspacing="0" cellpadding="0" border="0">
<tr>
    <td class="menuheadgraygfx" width="3">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/dark-left-corner.gif" alt=""/></td>
    <td class="menuheadgraytopline" width="60">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="60" height="1"/></td>
    <td class="menuheadgraygfx" width="3">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/dark-right-corner.gif" alt=""/></td>
</tr>
<tr>
    <td class="menuheadgrayleftline" width="3">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="1" height="15"/></td>
    <td class="menuheadgray">
    <p class="menuheadgray">
    <a class="menuheadlink" href="/web/20030814075436/http://ez.no/manual/">Manual</a>
    </p>
    </td>
    <td class="menuheadgrayrightline" width="3">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="1" height="15"/></td>
</tr>
</table>

</td>

    <td class="menuheadspacer" width="3">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="3" height="1"/></td>
    <td class="headlink" width="66">


<table cellspacing="0" cellpadding="0" border="0">
<tr>
    <td class="menuheadselectedgfx">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/light-left-corner.gif" alt=""/></td>
    <td class="menuheadselectedtopline">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="60" height="1"/></td>
    <td class="menuheadselectedgfx">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/light-right-corner.gif" alt=""/></td>
</tr>
<tr>
    <td class="menuheadselectedleftline">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="1" height="19"/></td>
    <td class="menuheadselected">
    <p class="menuheadselected">
    <a class="menuheadlink" href="/web/20030814075436/http://ez.no/sdk/">SDK</a>
    </p>
    </td>
    <td class="menuheadselectedrightline">
    <img src="/web/20030814075436im_/http://ez.no/design/standard/images/1x1.gif" alt="" width="1" height="19"/></td>
</tr>
</table>

    </td>
   <td class="headlogo" width="50%">
   &nbsp;</td>
</tr>
    <td colspan="11" class="menuheadtoolbar">
    &nbsp;
    </td>
</tr>
</table>


<table class="path" width="100%" cellpadding="0" cellspacing="0" border="0">
<tr>
    <td class="pathline" width="50%">
    <a class="path" href="/web/20030814075436/http://ez.no/sdk/tutorials/view/permissions" ">&lt;&lt; Permissions and sections</a>&nbsp;
    </td>
    <td class="pathline" align="right" width="50%">
    <a class="path" href="/web/20030814075436/http://ez.no/sdk/tutorials/view/translation" ">Translation and i18n &gt;&gt;</a>&nbsp;
    </td>
</tr>
</table>


<table width="100%" bgcolor="white" cellpadding="5" cellspacing="0" border="0">
<tr>
<td valign="top" width="15%">

<table class="menuboxleft" width="120" cellpadding="1" cellspacing="0" border="0">
<tr>
    <th class="menuheaddark" colspan="2">
    <p class="menuhead"><a class="menuhead" href="/web/20030814075436/http://ez.no/sdk/tutorials">Tutorials</p>
    </th>
</tr>
<tr>
    <td class="bullet" width="1">
    &nbsp;
    </td>
    <td class="menu" width="99%">
    <p class="menuitem"><img src="/web/20030814075436im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="/web/20030814075436/http://ez.no/sdk/tutorials/view/main_concepts/">Main concepts</a><br/><img src="/web/20030814075436im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="/web/20030814075436/http://ez.no/sdk/tutorials/view/content_classes/">Custom content</a><br/><img src="/web/20030814075436im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="/web/20030814075436/http://ez.no/sdk/tutorials/view/templateissues/">Common template issues</a><br/><img src="/web/20030814075436im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="/web/20030814075436/http://ez.no/sdk/tutorials/view/workflows/">Custom workflows</a><br/><img src="/web/20030814075436im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="/web/20030814075436/http://ez.no/sdk/tutorials/view/wrappingworkflow/">Example of wrapping workflow</a><br/><img src="/web/20030814075436im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="/web/20030814075436/http://ez.no/sdk/tutorials/view/publishworkflow/">Approval workflow</a><br/><img src="/web/20030814075436im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="/web/20030814075436/http://ez.no/sdk/tutorials/view/datatypes/">Datatypes</a><br/><img src="/web/20030814075436im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="/web/20030814075436/http://ez.no/sdk/tutorials/view/permissions/">Permissions and sections</a><br/><img src="/web/20030814075436im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="/web/20030814075436/http://ez.no/sdk/tutorials/view/forms/">Creating forms</a><br/><img src="/web/20030814075436im_/http://ez.no/design/standard/images/bullet.gif" width="12" height="12" alt="" border="0"/> <a href="/web/20030814075436/http://ez.no/sdk/tutorials/view/translation/">Translation and i18n</a><br/></p>
    </td>
</tr>
</table>
</td>

<td valign="top" width="85%">
<table width="100%" border="0">
<tr><td colspan="2">
<h1>Creating forms</h1>
<p>
In this tutorial we will create a feedback form where users can tell what they like and don't like
about your site.
</p>

<h2>Creating a new class</h2>
<p>
The first thing thing we need to do is create a new class for our feedback form.
Afterwards, we'll use this class to create new forms.
</p>

<p>
Login to your admin site and choose 'Classes' under the 'Set up' section. Enter one of the class groups.
These groups are used to categorize your classes. After entering one of the class groups press the 'New'
button to create a new class. You should be presented with the page shown below.
</p>

<img src="/web/20030814075436im_/http://ez.no/doc/images/form_new_class.png" alt="New class" border="1"/>

<p>
Now we need to add the different attributes we want our class to contain. For this example we will add
four attributes: Name, Email receiver, Subject and a Feedback field. We will fill in the first two fields
when we create a new form. The last two fields are meant for the user to fill in. Add the attributes as
shown in the picture below.
</p>

<img src="/web/20030814075436im_/http://ez.no/doc/images/form_new_class_attributes.png" alt="Attributes" border="1"/>

<p>
As you can see on the above picture attribute 3 and 4 have 'Information Collector' checked.
This enables the data in the attribute to be stored or sent.
</p>

<p>
If you only want one form on your site, or you want all the input from different forms mailed
to the same address you do not need the 'email receiver' attribute. It is possible to set the email receiver
in settings/site.ini, but we want the ability to set different addresses for different forms.
</p>

<p>
When you are done adding the attributes click on 'Store'.
</p>

<h2>Creating a new form</h2>
<p>
It is now time to use our class to create a form. Go to a location on the site you want your
form, select 'Submission form' from the drop down menu and click 'New'. Fill in the Name and
Email receiver field. The two last fields are meant for the user to fill in so leave those blank.
If the email address you set in the Email receiver field is invalid, the default address
from settings/site.ini will be used. When you are done click on 'Send for publishing'.
</p>

<p>
Before we proceed with customizing the form check that it works. Click on the form you created, fill in some
test data, click on 'send' and confirm that the data was sent to the email address you specified.
</p>

<h2>Creating a template</h2>
<p>
We want to customize the look and layout of our form. To accomplish this we need to create our own template
which will be used whenever an instance (a form created with the class we made in the beginning of the
tutorial) of our form class is viewed. The first information we need is the Class ID for our form class.
Go to 'Classes' under 'Set up' and choose the class group you created your form class in. You should now be
viewing a list of classes. The numbers in the first column are the class IDs. Get the ID for the form class
we created.
</p>

<p>
With the ID of the class we are going to create a new file called 'full_class_ID.tpl'. Replace 'ID' with the
ID of the form class. This file will be the full view for the class with the given ID. Place the file in
'design/standard/override/templates/node/view'. Shown below is an example of a template.
</p>

<pre class="example">
{default content_object=$node.object
         content_version=$node.contentobject_version_object
         node_name=$node.name}

&lt;h1&gt;{$node.data_map.name.content}&lt;/h1&gt;
&lt;p&gt;
We have just started this page and would like you to send your comments, ideas, 
improvement suggestions and critique to help us further 
develop this page. This page is made for you, 
the users, so here is your chance to contribute and make it the way you want it.
&lt;/p&gt;

&lt;form method="post" action={"content/action"|ezurl}&gt;

&lt;table width="100%" cellspacing="10" cellpadding="0" border="0"&gt;
&lt;tr&gt;
    &lt;td&gt;
    &lt;b&gt;Subject&lt;/b&gt;
    &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;
    {attribute_view_gui attribute=$node.data_map.subject}
    &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;table width="100%" cellspacing="10" cellpadding="0" border="0"&gt;
&lt;tr&gt;
    &lt;td&gt;
    &lt;b&gt;Feedback&lt;/b&gt;
    &lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
    &lt;td&gt;
    {attribute_view_gui attribute=$node.data_map.feedback}
    &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;


{section name=ContentAction loop=$content_object.content_action_list show=$content_object.content_action_list}
    &lt;div class="block"&gt;
        &lt;input type="submit" name="{$ContentAction:item.action}" value="{$ContentAction:item.name}" /&gt;
    &lt;/div&gt;
{/section}

&lt;input type="hidden" name="ContentNodeID" value="{$node.node_id}" /&gt;
&lt;input type="hidden" name="ContentObjectID" value="{$content_object.id}" /&gt;
&lt;input type="hidden" name="ViewMode" value="full" /&gt;

&lt;/form&gt;

{/default}
</pre>

For more information on templates read the <a href="/web/20030814075436/http://ez.no/sdk/eztemplate">template tutorial</a>.

<p>
The final template:
</p>
<img src="/web/20030814075436im_/http://ez.no/doc/images/form_template.png" alt="Template" border="1"/>

<p>
The final thing that needs to be done is change the collectedinfomail.tpl located in
'design/standard/template/content'.
The content of this template is what will be sent by mail.
</p>

<pre class="example">
{set-block scope=root variable=subject}{"Collected information from:"|i18n("design/standard/content/edit")}
{$collection.object.name} {/set-block}
{set-block scope=root variable=email_receiver}{$object.data_map.email_receiver.content}{/set-block}

{"The following information was collected:"|i18n("design/standard/content/edit")}

{section name=Attribute loop=$collection.attributes}
{$Attribute:item.contentclass_attribute_name}:
{$Attribute:item.data_text}
{/section}
</pre>

<p>
What we did here was to make the email_receiver variable correspond to whatever email address we enter
in the email_receiver attribute.
</p>
</td></tr>
</table>
</td>

</tr>
</table>

<br/>
<center>
<a href="http://web.archive.org/web/20030814075436/http://ez.no/developer">eZ publish&trade;</a> copyright &copy; 1999-2003 <a href="http://web.archive.org/web/20030814075436/http://ez.no/">eZ systems as</a>
</center>
<br/>
</body></html><!--
     FILE ARCHIVED ON 07:54:36 Aug 14, 2003 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 00:19:08 Nov 01, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 0.447
  exclusion.robots: 0.017
  exclusion.robots.policy: 0.008
  esindex: 0.009
  cdx.remote: 18.795
  LoadShardBlock: 390.121 (3)
  PetaboxLoader3.resolve: 187.367 (4)
  PetaboxLoader3.datanode: 232.386 (4)
  load_resource: 76.054
-->